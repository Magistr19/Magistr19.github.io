"use strict";var data=[{img:"https://www.ringcentral.com/content/dam/ringcentral/images/whyringcentral/casestudies/color/re-max-nexus-logo.png",title:"RE/MAX Nexus",text:"RE/MAX Nexus Innovates with Team Messaging and Collaboration",video:"https://www.youtube.com/watch?v=7qUK9TRl02o"},{img:"https://www.ringcentral.com/content/dam/ringcentral/images/whyringcentral/casestudies/color/msxi-logo.png",title:"MSXI",text:"A Platform for First-Class Customer Service",video:"https://www.youtube.com/watch?v=Ej10mMruFP4"},{img:"https://www.ringcentral.com/content/dam/ringcentral/images/whyringcentral/casestudies/brinker-page-logo.png",title:"Brinker International",text:"Brinker International has leveraged RingCentral platform data to help optimize the staffing at the restaurants",video:"https://www.youtube.com/watch?v=ahm93twt0jU"},{img:"https://www.ringcentral.com/content/dam/ringcentral/images/whyringcentral/casestudies/color/aseracare_card_logo.png",title:"AseraCare",text:"RingCentral Helps AseraCare Improve Customer Service Through Analytics-Driven Customer Engagement",video:"https://www.youtube.com/watch?v=U6fmFoNo7WY"}],videoFrame=document.querySelector(".modal-video__player"),player=null,currentVideoId=null,isModalOpened=!1;function renderPartners(data){if(!data.length)return console.error("No data for partners section!");var partnersSection=document.querySelector("#partnersSection");if(!partnersSection)return console.error("No partnersSection in HTML!");createNodeElement("h2","screen-reader","Our partners:",partnersSection);for(var partnersWrapper=createNodeElement("div","partners__wrapper",null,partnersSection),partnersList=createNodeElement("ul","partners__list",null,createNodeElement("div","partners__container",null,partnersWrapper)),partnersSlider=createNodeElement("ul",["slider-bullets","partners__slider-bullets"],null,partnersWrapper),i=0;i<data.length;i++)if(isValidData(data[i])){var partnersListItem=createNodeElement("li",["partner-card","partners__item"],null,partnersList),partnerImage=createNodeElement("img","partner-card__image",null,createNodeElement("div","partner-card__image-container",null,partnersListItem));partnerImage.setAttribute("src",data[i].img),partnerImage.setAttribute("alt",data[i].title);createNodeElement("h3","partner-card__title",data[i].title,partnersListItem),createNodeElement("p","partner-card__description",data[i].text,partnersListItem);createNodeElement("a","partner-card__watch-video","Watch video",partnersListItem).setAttribute("href",data[i].video);var partnersSliderItem=createNodeElement("li","slider-bullets__item",null,partnersSlider),partnersSliderInput=createNodeElement("input",null,null,partnersSliderItem);partnersSliderInput.setAttribute("type","radio"),partnersSliderInput.setAttribute("name","slider-bullets__radio"),partnersSliderInput.setAttribute("id","slider-bullets__radio-".concat(i+1)),partnersSliderInput.setAttribute("value","".concat(i+1)),0===i&&partnersSliderInput.setAttribute("checked",""),createNodeElement("label",null,null,partnersSliderItem).setAttribute("for","slider-bullets__radio-".concat(i+1))}partnersSection.appendChild(partnersWrapper)}function createNodeElement(){var tagName=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",className=arguments.length>1?arguments[1]:void 0,innerText=arguments.length>2?arguments[2]:void 0,parentNode=arguments.length>3?arguments[3]:void 0;if("string"!=typeof tagName)return console.error("invalid argument in function CreateElement"),null;if(className&&"string"!=typeof className&&!Array.isArray(className))return console.error("invalid argument in function CreateElement"),null;if(innerText&&"string"!=typeof innerText)return console.error("invalid argument in function CreateElement"),null;var newElement=document.createElement(tagName);return className&&(Array.isArray(className)?className.forEach(function(classStr){newElement.classList.add(classStr)}):newElement.classList.add(className)),innerText&&(newElement.textContent=innerText),parentNode&&parentNode.appendChild(newElement),newElement}function isValidData(obj){return"string"==typeof obj.img&&"string"==typeof obj.title&&"string"==typeof obj.text&&"string"==typeof obj.video}function revivePartnersCarousel(){var partnersList=document.querySelector(".partners__list");if(!partnersList)return console.error("no partners list!");var radioBtns=document.querySelector(".partners__slider-bullets").querySelectorAll('input[type="radio"]'),radioChecked=radioBtns[0];function eventRadio(evt){var previousRadioValue=radioChecked.value,currentRadioValue=(radioChecked=this).value;previousRadioValue!==currentRadioValue&&(partnersList.style.transform="translateX(".concat(-100*(currentRadioValue-1),"%)"))}radioChecked.checked=!0,[].forEach.call(radioBtns,function(radio){radio.addEventListener("click",eventRadio)})}function reviveModalVideo(){var modalVideo=document.querySelector(".modal-video"),closeModal=document.querySelector(".modal-video__close"),overlay=document.querySelector(".overlay"),videoLinks=document.querySelectorAll(".partner-card__watch-video");function eventWatchVideo(evt){evt.preventDefault(),overlay.classList.toggle("overlay--show"),modalVideo.classList.toggle("modal-video--show"),isModalOpened=!0;var link=evt.target.href;currentVideoId=link.slice(link.indexOf("?v=")+3),player?player.loadVideoById(currentVideoId):loadVideoPlayer()}closeModal.addEventListener("click",function(evt){evt.preventDefault(),overlay.classList.toggle("overlay--show"),modalVideo.classList.toggle("modal-video--show"),sendVideoAnalytics(),stopVideo(),isModalOpened=!1,currentVideoId=null}),[].forEach.call(videoLinks,function(videoLink){videoLink.addEventListener("click",eventWatchVideo)})}function loadVideoPlayer(){var tag=document.createElement("script");tag.src="https://www.youtube.com/iframe_api";var firstScriptTag=document.getElementsByTagName("script")[0];firstScriptTag.parentNode.insertBefore(tag,firstScriptTag)}function onYouTubeIframeAPIReady(){player=new YT.Player(videoFrame,{height:"100%",width:"100%",videoId:currentVideoId,events:{onReady:onPlayerReady,onStateChange:onPlayerStateChange}})}function onPlayerReady(event){event.target.playVideo()}function onPlayerStateChange(event){event.data==YT.PlayerState.ENDED&&setTimeout(function(){!1!==isModalOpened&&(sendVideoAnalytics(),currentVideoId=getNextVideoId(currentVideoId),player.loadVideoById(currentVideoId))},1e4)}function stopVideo(){player.stopVideo()}function sendVideoAnalytics(){var videoDuration=player.getDuration(),timeWatched=player.getCurrentTime(),videoId=currentVideoId,fullLink="https://www.youtube.com/watch?v=".concat(videoId),cardTitle=document.querySelector("a[href='".concat(fullLink,"'")).parentNode.querySelector("h3").textContent,percentageOfWatch=Math.round(timeWatched/videoDuration*100);percentageOfWatch=percentageOfWatch>=0&&percentageOfWatch<25?0:percentageOfWatch>=25&&percentageOfWatch<50?25:percentageOfWatch>=50&&percentageOfWatch<75?50:percentageOfWatch>=75&&percentageOfWatch<95?75:100,console.info("[".concat(cardTitle,"] - [").concat(videoId,"] - [").concat(percentageOfWatch,"]"))}function getNextVideoId(videoId){for(var nextLink,fullLink="https://www.youtube.com/watch?v=".concat(videoId),i=0;i<data.length;i++)data[i].video===fullLink&&(nextLink=i+1===data.length?data[0].video:data[i+1].video);return nextLink=nextLink.slice(nextLink.indexOf("?v=")+3)}renderPartners(data),revivePartnersCarousel(),reviveModalVideo();