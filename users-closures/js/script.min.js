"use strict";var users={},createButton=document.querySelector("#createButton"),renameButton=document.querySelector("#renameButton"),nameField=document.querySelector("#lastName"),usersTable=document.querySelector("#usersTable"),usersTableTbody=usersTable.querySelector("tbody"),generateButton=document.querySelector("#generateButton"),countField=document.querySelector("#countUsers"),currentId=null,currentCard=null;function User(){var userName="",userId=null,card=document.createElement("tr"),removeBtn=document.createElement("button"),textUserName=document.createElement("td");textUserName.classList.add("align-middle");var renameBtn=document.createElement("button");return{addUser:function(name,id){this.name=name,userName=name,userId=id,function(){card.id=userId;var tableNumber=document.createElement("th");tableNumber.classList.add("align-middle"),card.appendChild(tableNumber),textUserName.textContent=userName,card.appendChild(textUserName),renameBtn.classList.add("btn","btn-warning"),renameBtn.textContent="Edit";var renameBtnTd=document.createElement("td");renameBtnTd.appendChild(renameBtn),card.appendChild(renameBtnTd),removeBtn.classList.add("btn","btn-danger"),removeBtn.textContent="Delete";var removeBtnTd=document.createElement("td");removeBtnTd.appendChild(removeBtn),card.appendChild(removeBtnTd),removeBtn.addEventListener("click",function(event){event.preventDefault();var delCard=this.parentNode.parentNode;users[delCard.id].removeUser(delCard)}),renameBtn.addEventListener("click",function(event){event.preventDefault(),createButton.style.display="none",renameButton.style.display="inline-block",nameField.value=userName,currentId=userId,currentCard=document.querySelector("#"+userId)}),usersTableTbody.appendChild(card),usersTable.style.display="table"}()},removeUser:function(card){card&&card.remove(),delete users[userId]},renameUser:function(name,card){this.name=name,userName=name,card&&(card.querySelector("td:nth-child(2)").textContent=name)}}}function initUsers(count){for(var names=["Саша","Вася","Петя","Игорь","Коля","Маша","Вика","Кирилл","Женя","Света","Вова"],i=0;i<count;i++){var randName=names[generateRandNum(0,names.length-1)],userHash=generateUserHash();users[userHash]=User(),users[userHash].addUser(randName,userHash)}}function generateUserHash(){var date=new Date;return date=date.getTime()+"","user"+(""+Math.floor(10*Math.random())+Math.floor(10*Math.random())+Math.floor(10*Math.random())+Math.floor(10*Math.random())+Math.floor(10*Math.random())+date.slice(-8))}function generateRandNum(min,max){return Math.floor(Math.random()*(max-min+1))+min}function isNumeric(n){return!isNaN(parseFloat(n))&&isFinite(n)}createButton.addEventListener("click",function(event){if(event.preventDefault(),!nameField.value)return alert("Ошибка ввода!"),0;var nameValue=nameField.value,userHash=generateUserHash();users[userHash]=User(),users[userHash].addUser(nameValue,userHash),nameField.value=""}),renameButton.addEventListener("click",function(event){if(event.preventDefault(),!nameField.value)return alert("Ошибка ввода!"),0;var changedName=nameField.value;users[currentId].renameUser(changedName,currentCard),currentId=null,currentCard=null,renameButton.style.display="none",createButton.style.display="inline-block",nameField.value=""}),generateButton.addEventListener("click",function(event){if(event.preventDefault(),!countField.value||countField.value<1||!isNumeric(countField.value))return alert("Ошибка ввода!"),0;initUsers(countField.value),countField.value=""});